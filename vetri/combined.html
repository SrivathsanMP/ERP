<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Balfour Beatty - Combined</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div class="top-bar">
    <div class="top-left">
      <button id="menuBtn" class="menu-btn" title="Toggle sidebar">â˜°</button>
      <span id="greeting">BALFOUR BEATTY</span>
    </div>
  </div>

  <aside class="sidebar" id="sidebar">
    <div class="profile-section">
      <div class="profile-pic"><img id="profilePic" src="https://via.placeholder.com/80" alt="User"></div>
      <div class="profile-name" id="profileName">Guest</div>
      <div class="profile-role" id="profileRole">Visitor</div>
    </div>

    <nav class="sidebar-buttons" aria-label="Primary">
      <button id="navDashboard" class="btn"><span class="icon">âŒ‚</span><span class="label">Dashboard</span></button>
      <button id="navResponse" class="btn"><span class="icon">â†©</span><span class="label">Responses</span></button>
      <button id="navNotification" class="btn"><span class="icon">N</span><span class="label">Notification</span></button>
      <button id="navTicket" class="btn"><span class="icon">âŠ¡</span><span class="label">Tickets</span></button>
      <button id="sidebarLoginLogoutBtn" class="btn bottom-btn"><span class="icon">â†ª</span><span class="label">Log out</span></button>
    </nav>
  </aside>

  <main class="main" id="mainContent">
    <div class="dashboard-container">
        <div class="welcome-section">
            <h1 class="page-title">Dashboard</h1>
            <p class="welcome-text">Welcome to your dashboard. Click the + button in the bottom right corner to create a new project request.</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-title">Active Projects</div>
                <div class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Pending Responses</div>
                <div class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">New Notifications</div>
                <div class="stat-value">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Open Tickets</div>
                <div class="stat-value">0</div>
            </div>
        </div>

        <div class="recent-activity">
            <h2 class="section-title">Recent Activity</h2>
            <ul class="activity-list">
                <li class="activity-item">
                    <div class="activity-icon"></div>
                    <div class="activity-content">
                        <div class="activity-title"></div>
                        <div class="activity-time"></div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-icon"></div>
                    <div class="activity-content">
                        <div class="activity-title"></div>
                        <div class="activity-time"></div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-icon"></div>
                    <div class="activity-content">
                        <div class="activity-title"></div>
                        <div class="activity-time"></div>
                    </div>
                </li>
                <li class="activity-item">
                    <div class="activity-icon"></div>
                    <div class="activity-content">
                        <div class="activity-title"></div>
                        <div class="activity-time"></div>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Tickets Page -->
    <div class="tickets-container" id="ticketsPage" style="display:none">
      <div class="tickets-header">
        <div class="tickets-title-wrap">
          <div class="tickets-title">Support Tickets</div>
          <div class="tickets-subtitle">Create and manage your support tickets</div>
        </div>
        <div class="tickets-controls">
          <button id="newTicketBtn" class="btn"><span class="plus">+</span>New Ticket</button>
        </div>
      </div>

      <div id="ticketsEmpty" class="tickets-empty" style="display:none">
        <div class="icon">ðŸŽŸ</div>
        <strong>No tickets yet.</strong>
        Create your first support ticket.
      </div>

      <table class="tickets-table" id="ticketsTable">
        <thead>
          <tr>
            <th>Title</th>
            <th>Status</th>
            <th>Priority</th>
            <th>Created</th>
            <th>Updated</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="ticketsTbody"></tbody>
      </table>
    </div>

    <!-- Ticket Modal -->
    <div id="ticketModal" class="modal-overlay" aria-hidden="true">
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="ticketModalTitle">
        <button class="modal-close" id="ticketModalClose" aria-label="Close">Ã—</button>
        <h2 id="ticketModalTitle">Create Support Ticket</h2>
        <p style="margin:0 24px 10px; color:#6b7280">Submit a new support ticket. Our team will respond as soon as possible.</p>
        <form id="ticketForm">
          <div class="form-grid">
            <div class="col">
              <label>Title<input name="title" id="ticketTitle" type="text" placeholder="Brief description of the issue" required /></label>
              <label>Priority
                <select name="priority" id="ticketPriority" required>
                  <option value="low">Low</option>
                  <option value="medium" selected>Medium</option>
                  <option value="high">High</option>
                </select>
              </label>
            </div>
            <div class="col">
              <label>Description<textarea name="description" id="ticketDescription" rows="4" placeholder="Detailed description of your issue" required></textarea></label>
              <label>Category<input name="category" id="ticketCategory" type="text" placeholder="e.g., Technical, Billing" /></label>
            </div>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="ticketModalCancel">Cancel</button>
            <button type="submit" class="btn-primary">Create Ticket</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Requests Page -->
    <div class="tickets-container" id="requestsPage" style="display:none">
      <div class="tickets-header">
        <div class="tickets-title-wrap">
          <div class="tickets-title">Project Requests</div>
          <div class="tickets-subtitle">View and manage your project requests</div>
        </div>
        <div class="tickets-controls">
          <button id="newRequestBtn" class="btn"><span class="plus">+</span>New Request</button>
        </div>
      </div>

      <div id="requestsEmpty" class="tickets-empty" style="display:none">
        <div class="icon">ðŸ“‹</div>
        <strong>No requests yet.</strong>
        Create your first project request.
      </div>

      <table class="tickets-table" id="requestsTable">
        <thead>
          <tr>
            <th>Project Name</th>
            <th>Project Number</th>
            <th>Status</th>
            <th>Created</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="requestsTbody"></tbody>
      </table>
    </div>

    <!-- Notifications Page -->
    <div class="tickets-container" id="notificationsPage" style="display:none">
      <div class="tickets-header">
        <div class="tickets-title-wrap">
          <div class="tickets-title">Notifications</div>
          <div class="tickets-subtitle">Stay updated with your latest notifications</div>
        </div>
        <div class="tickets-controls">
          <button id="markAllReadBtn" class="btn">Mark All as Read</button>
        </div>
      </div>

      <div id="notificationsEmpty" class="tickets-empty" style="display:none">
        <div class="icon">ðŸ””</div>
        <strong>No notifications yet.</strong>
        You're all caught up!
      </div>

      <div id="notificationsList" class="notifications-list"></div>
    </div>

    <button class="create-request-btn" title="Create new project request">+</button>

    <div id="projectModal" class="modal-overlay" aria-hidden="true">
        <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <button class="modal-close" id="modalClose" aria-label="Close">Ã—</button>
            <h2 id="modalTitle">Project Request Form</h2>
            <form id="projectForm">
                <div class="form-grid">
                    <div class="col">
                        <label>Project Name<input name="projectName" type="text" placeholder="" required /></label>
                        <label>Project Number<input name="projectNumber" type="text" required /></label>
                        <label>TW Ref Reg No<input name="twRef" type="text" required /></label>
                        <label>Revision<input name="revision" type="text" required /></label>
                        <label>Location<input name="location" type="text" required /></label>
                        <label>Management Class
                            <div class="radio-row">
                                <label><input type="radio" name="mgmtClass" value="0" checked> 0</label>
                                <label><input type="radio" name="mgmtClass" value="1"> 1</label>
                                <label><input type="radio" name="mgmtClass" value="2"> 2</label>
                                <label><input type="radio" name="mgmtClass" value="3"> 3</label>
                            </div>
                        </label>
                        <label>Client<input name="client" type="text" required /></label>
                        <label>Sector<input name="sector" type="text" required /></label>
                        <label>Task Code<input name="taskCode" type="text" required /></label>
                        <label>BB Project Manager<input name="bbManager" type="text" required /></label>
                        <label>Site Contact Name<input name="siteContactName" type="text" required /></label>
                        <label>Site Contact Tel<input name="siteContactTel" type="text" required /></label>
                    </div>
                    <div class="col">
                        <label>Purpose<textarea name="purpose" rows="4" placeholder="Describe the purpose..." required></textarea></label>
                        <label>Scope<textarea name="scope" rows="4" placeholder="Describe the scope..." required></textarea></label>
                        <label>Deliverables<textarea name="deliverables" rows="4" placeholder="List expected deliverables..." required></textarea></label>
                        <label>Document Upload<input name="documents" id="documents" type="file" multiple accept="/" required /></label>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="modalCancel">Cancel</button>
                    <button type="submit" class="btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>
  </main>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="script.js"></script>
</body>
</html>